<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>forma Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>forma</h1>

<ul>
  <li><a href="../contents.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Sub_patterns">Sub-patterns </a></li>
<li><a href="#Lists_of_sub_patterns">Lists of sub-patterns </a></li>
<li><a href="#Utilities">Utilities </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/forma.cell.html">forma.cell</a></li>
  <li><a href="../modules/forma.pattern.html">forma.pattern</a></li>
  <li><a href="../modules/forma.primitives.html">forma.primitives</a></li>
  <li><strong>forma.subpattern</strong></li>
  <li><a href="../modules/forma.automata.html">forma.automata</a></li>
  <li><a href="../modules/forma.neighbourhood.html">forma.neighbourhood</a></li>
</ul>
<h2>Readme</h2>
<ul class="nowrap">
  <li><a href="../readme/README.md.html">README</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/async_automata.lua.html">async_automata.lua</a></li>
  <li><a href="../examples/binary_space_partition.lua.html">binary_space_partition.lua</a></li>
  <li><a href="../examples/bubbles.lua.html">bubbles.lua</a></li>
  <li><a href="../examples/cellular_automata.lua.html">cellular_automata.lua</a></li>
  <li><a href="../examples/convex_hull.lua.html">convex_hull.lua</a></li>
  <li><a href="../examples/corridors.lua.html">corridors.lua</a></li>
  <li><a href="../examples/isolines.lua.html">isolines.lua</a></li>
  <li><a href="../examples/maxrectangle.lua.html">maxrectangle.lua</a></li>
  <li><a href="../examples/perlin.lua.html">perlin.lua</a></li>
  <li><a href="../examples/readme.lua.html">readme.lua</a></li>
  <li><a href="../examples/sampling.lua.html">sampling.lua</a></li>
  <li><a href="../examples/voronoi.lua.html">voronoi.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>forma.subpattern</code></h1>
<p>Sub-pattern finders.</p>
<p> Functions for the selection of <strong>sub-patterns</strong> of various forms from a parent
 <a href="../modules/forma.pattern.html">pattern</a>. The simplest of these is the <a href="../modules/forma.subpattern.html#random">random</a> sampling of a fraction of
 <a href="../modules/forma.cell.html">cell</a>s from the parent.</p>

<p> Several of these finders return a table of all relevant sub-patterns. For
 example the <a href="../modules/forma.subpattern.html#segments">segments</a> method which returns a table of all contiguous
 (according to some <a href="../modules/forma.neighbourhood.html">neighbourhood</a>) sub-patterns by using a <a href="../modules/forma.subpattern.html#floodfill">floodfill</a>.</p>

<p> In addition to the subpattern finders, a <a href="../modules/forma.subpattern.html#print_patterns">print_patterns</a> utility is provided
 to render these tables of sub-patterns into text.</p>


<h2><a href="#Sub_patterns">Sub-patterns </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#mask">mask (ip, mask)</a></td>
	<td class="summary">Masked subpattern.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#random">random (ip, ncells, rng)</a></td>
	<td class="summary">Random subpattern.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#poisson_disc">poisson_disc (ip, distance, radius, rng)</a></td>
	<td class="summary">Poisson-disc random subpattern.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#mitchell_sample">mitchell_sample (ip, distance, n, k, rng)</a></td>
	<td class="summary">Mitchell's best candidate sampling.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#perlin">perlin (ip, freq, depth, thresholds, rng)</a></td>
	<td class="summary">Perlin noise sampling.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#floodfill">floodfill (ip, ipt, nbh)</a></td>
	<td class="summary">Returns the contiguous sub-pattern of ip that surrounts <a href="../modules/forma.cell.html">cell</a> ipt</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#maxrectangle">maxrectangle (ip)</a></td>
	<td class="summary">Find the maximal contiguous rectangular area within a pattern.</td>
	</tr>
</table>
<h2><a href="#Lists_of_sub_patterns">Lists of sub-patterns </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#segments">segments (ip, nbh)</a></td>
	<td class="summary">Generate a table of contiguous 'segments' or sub-patterns.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#enclosed">enclosed (ip, nbh)</a></td>
	<td class="summary">Returns a table of 'enclosed' segments of a pattern.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#bsp">bsp (ip, th_volume)</a></td>
	<td class="summary">Generate subpatterns by binary space partition.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#neighbourhood_categories">neighbourhood_categories (ip, nbh)</a></td>
	<td class="summary">Determine subpatterns for all <a href="../modules/forma.neighbourhood.html">neighbourhood</a> categories.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#voronoi">voronoi (seeds, domain, measure)</a></td>
	<td class="summary">Generate Voronoi tesselations of cells in a domain.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#voronoi_relax">voronoi_relax (seeds, domain, measure, max_ite)</a></td>
	<td class="summary">Generate (approx) centroidal Voronoi tessellation.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#convex_hull_points">convex_hull_points (ip)</a></td>
	<td class="summary">Compute the points lying on the convex hull of a pattern.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#convex_hull">convex_hull (ip)</a></td>
	<td class="summary">Compute the convex hull of a pattern.</td>
	</tr>
</table>
<h2><a href="#Utilities">Utilities </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#print_patterns">print_patterns (domain, segments, chars)</a></td>
	<td class="summary">Print a table of forma.patterns.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Sub_patterns"></a>Sub-patterns </h2>

    <dl class="function">
    <dt>
    <a name = "mask"></a>
    <strong>mask (ip, mask)</strong>
    </dt>
    <dd>
    Masked subpattern.
 Generate a subpattern by applying a boolean mask to an input pattern.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         the pattern to be masked.
        </li>
        <li><span class="parameter">mask</span>
         a function that takes a <a href="../modules/forma.cell.html">cell</a> and returns true if the cell passes the mask
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A pattern consisting only of those cells in <code>domain</code> which pass the <a href="../modules/forma.subpattern.html#mask">mask</a> argument.
    </ol>




</dd>
    <dt>
    <a name = "random"></a>
    <strong>random (ip, ncells, rng)</strong>
    </dt>
    <dd>
    Random subpattern.
 For a given domain, returns a pattern sampling randomly from it, generating a random
 subset with a fixed fraction of the size of the domain.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         pattern for sampling a random pattern from
        </li>
        <li><span class="parameter">ncells</span>
         the number of desired cells in the sample
        </li>
        <li><span class="parameter">rng</span>
         (optional) a random number generator, following the signature of math.random.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        a pattern of <code>ncells</code> cells sampled randomly from <code>domain</code>
    </ol>




</dd>
    <dt>
    <a name = "poisson_disc"></a>
    <strong>poisson_disc (ip, distance, radius, rng)</strong>
    </dt>
    <dd>
    Poisson-disc random subpattern.
 Sample a domain according to the Poisson-disc procedure. For a given
 distance measure <code>distance</code>, this generates samples that are never closer
 together than a specified radius.  While much slower than <a href="../modules/forma.subpattern.html#random">subpattern.random</a>,
 it provides a more uniform distribution of points in the domain (simmilar to
 that of <a href="../modules/forma.subpattern.html#voronoi_relax">subpattern.voronoi_relax</a>).


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         domain pattern to sample from
        </li>
        <li><span class="parameter">distance</span>
         a measure  of distance between two cells d(a,b) e.g cell.euclidean
        </li>
        <li><span class="parameter">radius</span>
         the minimum separation in <code>distance</code> between two sample points.
        </li>
        <li><span class="parameter">rng</span>
         (optional) a random number generator, following the signature of math.random.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        a Poisson-disc sample of <code>domain</code>
    </ol>




</dd>
    <dt>
    <a name = "mitchell_sample"></a>
    <strong>mitchell_sample (ip, distance, n, k, rng)</strong>
    </dt>
    <dd>
    Mitchell's best candidate sampling.
 Generates an approximate Poisson-disc sampling by Mitchell's algorithm.
 Picks 'k' sample point attempts at every iteration, and picks the candidate
 that maximises the distance to existing samples. Halts when <code>n</code> samples are
 picked.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         domain pattern to sample from
        </li>
        <li><span class="parameter">distance</span>
         a measure of distance between two cells d(a,b) e.g cell.euclidean
        </li>
        <li><span class="parameter">n</span>
         the requested number of samples
        </li>
        <li><span class="parameter">k</span>
         the number of candidates samples at each iteration
        </li>
        <li><span class="parameter">rng</span>
         (optional) a random number generator, following the signature of math.random.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        an approximate Poisson-disc sample of <code>domain</code>
    </ol>




</dd>
    <dt>
    <a name = "perlin"></a>
    <strong>perlin (ip, freq, depth, thresholds, rng)</strong>
    </dt>
    <dd>
    Perlin noise sampling.
 Samples an input pattern by thresholding a Perlin-noise pattern in the
 domain.  This function takes an initial sampling frequency, and computes
 perlin noise over the input pattern by taking the product of <code>depth</code>
 successively halved frequencies. A table of subpatterns are then returned,
 consisting of the perlin noise function thresholded at requested levels.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         pattern upon which the thresholded noise sampling is to be performed.
        </li>
        <li><span class="parameter">freq</span>
         (float) frequency of desired perlin noise
        </li>
        <li><span class="parameter">depth</span>
         (int), sampling depth.
        </li>
        <li><span class="parameter">thresholds</span>
         table of sampling thresholds (between 0 and 1).
        </li>
        <li><span class="parameter">rng</span>
         (optional) a random number generator, following the signature of math.random.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        a table of <code>patterns</code>, one per threshold entry.
    </ol>




</dd>
    <dt>
    <a name = "floodfill"></a>
    <strong>floodfill (ip, ipt, nbh)</strong>
    </dt>
    <dd>
    Returns the contiguous sub-pattern of ip that surrounts <a href="../modules/forma.cell.html">cell</a> ipt


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         pattern upon which the flood fill is to be performed
        </li>
        <li><span class="parameter">ipt</span>
         a <a href="../modules/forma.cell.html">cell</a> specifying the origin of the flood fill
        </li>
        <li><span class="parameter">nbh</span>
         defines which neighbourhood to scan in while flood-filling (default 8/moore)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        a forma.pattern consisting of the contiguous segment about cell
    </ol>




</dd>
    <dt>
    <a name = "maxrectangle"></a>
    <strong>maxrectangle (ip)</strong>
    </dt>
    <dd>
    Find the maximal contiguous rectangular area within a pattern.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         the input pattern
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        The subpattern of <code>ip</code> consisting of its largest contiguous rectangular area.
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="Lists_of_sub_patterns"></a>Lists of sub-patterns </h2>

    <dl class="function">
    <dt>
    <a name = "segments"></a>
    <strong>segments (ip, nbh)</strong>
    </dt>
    <dd>
    Generate a table of contiguous 'segments' or sub-patterns.
 This performs a series of flood-fill operations until all
 pattern cells are accounted for in the sub-patterns


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         pattern for which the segments are to be extracted
        </li>
        <li><span class="parameter">nbh</span>
         defines which neighbourhood to scan in while flood-filling (default 8/moore)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A table of forma.patterns consisting of contiguous sub-patterns of ip.
    </ol>




</dd>
    <dt>
    <a name = "enclosed"></a>
    <strong>enclosed (ip, nbh)</strong>
    </dt>
    <dd>
    Returns a table of 'enclosed' segments of a pattern.
 Enclosed areas are the inactive areas of a pattern which are
 completely surrounded by active areas


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         pattern for which the enclosed areas should be computed
        </li>
        <li><span class="parameter">nbh</span>
         defines which directions to scan in while flood-filling (default 4/vn)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A table of forma.patterns comprising the enclosed areas of ip.
    </ol>




</dd>
    <dt>
    <a name = "bsp"></a>
    <strong>bsp (ip, th_volume)</strong>
    </dt>
    <dd>
    Generate subpatterns by binary space partition.
 This works by finding all the contiguous rectangular volumes in the input
 pattern and running a binary space partition on all of them. The partitions
 are then returned in a table.</p>

<p> The BSP is controlled by the <code>threshold volume</code> parameter. The algorithm
 will recursively subdivide every rectangular area evenly in two until the
 volume of the largest remaining area is less than <code>th_volume</code>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         the pattern for which the BSP will be run over
        </li>
        <li><span class="parameter">th_volume</span>
         the highest acceptable volume for each final partition
        </li>
    </ul>





</dd>
    <dt>
    <a name = "neighbourhood_categories"></a>
    <strong>neighbourhood_categories (ip, nbh)</strong>
    </dt>
    <dd>
    Determine subpatterns for all <a href="../modules/forma.neighbourhood.html">neighbourhood</a> categories.
 Each neighbourhood has a number of possible combinations or <code>categories</code>
 of active cells. This function categorises each cell in an input pattern
 into one of the neighbourhood's categories.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         the pattern in which cells are to be categorised
        </li>
        <li><span class="parameter">nbh</span>
         the forma.neighbourhood used for the categorisation
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A table of #nbh patterns, where each cell in ip is categorised.
    </ol>




</dd>
    <dt>
    <a name = "voronoi"></a>
    <strong>voronoi (seeds, domain, measure)</strong>
    </dt>
    <dd>
    Generate Voronoi tesselations of cells in a domain.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">seeds</span>
         the set of seed cells for the tesselation
        </li>
        <li><span class="parameter">domain</span>
         the domain of the tesselation
        </li>
        <li><span class="parameter">measure</span>
         the measure used to judge distance between cells
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A table of Voronoi segments.
    </ol>




</dd>
    <dt>
    <a name = "voronoi_relax"></a>
    <strong>voronoi_relax (seeds, domain, measure, max_ite)</strong>
    </dt>
    <dd>
    Generate (approx) centroidal Voronoi tessellation.
 Given a set of prior seeds and a domain, this iterates the position of the
 seeds until they are approximately located at the centre of their Voronoi
 segments. Lloyd's algorithm is used.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">seeds</span>
         the original seed points to be relaxed
        </li>
        <li><span class="parameter">domain</span>
         the domain to be tesselated
        </li>
        <li><span class="parameter">measure</span>
         the distance measure to be used between cells
        </li>
        <li><span class="parameter">max_ite</span>
         (optional) maximum number of iterations of relaxation (default 30)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        A table of resuling Voronoi segments.</li>
        <li>
        A <a href="../modules/forma.pattern.html">pattern</a> consisting of the voronoi segment centres.</li>
        <li>
        A bool, true if the algorithm converged, false if not.</li>
    </ol>




</dd>
    <dt>
    <a name = "convex_hull_points"></a>
    <strong>convex_hull_points (ip)</strong>
    </dt>
    <dd>
    Compute the points lying on the convex hull of a pattern.
 This computes the points lying on a pattern's convex hull with Andrew's
 monotone chain convex hull algorithm. Adapted from sixFinger's
 implementation at
 https://gist.github.com/sixFingers/ee5c1dce72206edc5a42b3246a52ce2e


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         input pattern for generating the convex hull
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        A <a href="../modules/forma.pattern.html">pattern</a> consisting of the points of <code>ip</code> lying on the convex hull.</li>
        <li>
        A clockwise-ordered table of cells on the convex hull</li>
    </ol>




</dd>
    <dt>
    <a name = "convex_hull"></a>
    <strong>convex_hull (ip)</strong>
    </dt>
    <dd>
    Compute the convex hull of a pattern.
 This computes the points on a pattern's convex hull with
 subpattern.convex<em>hull</em>points and connects the points with line rasters.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ip</span>
         input pattern for generating the convex hull
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A <a href="../modules/forma.pattern.html">pattern</a> consisting of the convex hull of <code>ip</code>
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="Utilities"></a>Utilities </h2>

    <dl class="function">
    <dt>
    <a name = "print_patterns"></a>
    <strong>print_patterns (domain, segments, chars)</strong>
    </dt>
    <dd>
    Print a table of forma.patterns.
 Prints a table of pattern segments to <a href="https://www.lua.org/manual/5.3/manual.html#pdf-io.output">io.output</a>. If provided, a table of
 segment labels can be used, with one entry per segment.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">domain</span>
         the basic pattern from which the segments were generated.
        </li>
        <li><span class="parameter">segments</span>
         the table of segments to be drawn.
        </li>
        <li><span class="parameter">chars</span>
         the characters to be printed for each segment (optional).
        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2020-04-09 15:41:33 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
